trigger:
- master

pool:
  name: Jetson

variables:
  DOCKER_CLI_EXPERIMENTAL: enabled

stages:
  - stage: Test
    jobs:
    - job: Test
      displayName: Builds and tests prgram
      steps:
      - script: docker login -u emwjacobson -p $(DOCKER_HUB_TOKEN) 
        displayName: 'Login to Docker'
      - script: docker pull emwjacobson/cudatester
        displayName: 'Pulls the latest version of cudatester'
      - script: docker run -v `pwd`:/app/copy --rm emwjacobson/cudatester make
        displayName: 'Test our program against Gold program'
