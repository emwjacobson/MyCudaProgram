trigger:
- master
- profiler

pool:
  # This is the name of the agent pool to run the tests on
  name: Jetson

stages:
  - stage: Test
    jobs:
    
    - job:
      displayName: Runs my CUDA program
      steps:
      - script: make -j -k -C MySampleProgram
        displayName: 'Runs our program'
      - script: nvprof --log-file cudaProgram.log ./MySampleProgram/cudaProgram
        displayName: 'Run Nvidia Profiler on program'
      - publish: cudaProgram.log
        artifact: 'Profiler Output'
